import{u as Y,g as se,h as te,i as B,j as ae,P as re,t as le,k as ne,l as F,m as b,n as ie,w as M,p as t,q as ue,R as $,v as oe,x as ce,y as de,C as ve,z as pe,A as ye,B as he,D as me,E as fe,F as q,G as ge,H as we,I as He,J as j,K as I,L as Re}from"./app-CtMp5CZU.js";const ke=["/de/","/en/","/es/","/fr/","/de/contact/","/de/donate/","/de/features/","/de/get-started/","/de/imprint/","/de/learn/","/de/news/","/de/news/test.html","/de/privacy-policy/","/en/contact/","/en/contribute/","/en/donate/","/en/features/","/en/get-started/","/en/imprint/","/en/learn/","/en/news/","/en/privacy-policy/","/es/contact/","/es/contribute/","/es/donate/","/es/features/","/es/imprint/","/es/learn/","/es/news/","/es/privacy-policy/","/fr/contribute/","/fr/contribute/new_file.html","/fr/donate/","/fr/features/","/fr/get-started/","/fr/imprint/","/fr/learn/","/fr/privacy-policy/","/de/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/de/news/2025-08-18-tech-day-fusion-von-utopia-und-ocelot/","/de/news/2025-09-15-release-3-12-0-published/","/de/news/2025-09-23-tech-day-oauth-and-oidc/","/de/news/2025-10-28-release-3-13-0-add-call-to-action-on-comment-list/","/en/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/en/news/2025-08-18-tech-day-fusion-von-utopia-und-ocelot/","/en/news/2025-09-15-release-3-12-0-published/","/en/news/2025-09-23-tech-day-oauth-and-oidc/","/en/news/2025-10-28-release-3-13-0-add-call-to-action-on-comment-list/","/es/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/es/news/2025-08-18-tech-day-fusion-von-utopia-und-ocelot/","/es/news/2025-09-15-release-3-12-0-published/","/es/news/2025-09-23-tech-day-oauth-and-oidc/","/es/news/2025-11-04-test-blog-entry/","/fr/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/404.html","/fr/news/","/de/category/","/de/category/news/","/en/category/","/en/category/news/","/es/category/","/es/category/news/","/fr/category/","/fr/category/news/","/de/tag/","/de/tag/releases/","/en/tag/","/en/tag/releases/","/es/tag/","/es/tag/releases/","/fr/tag/","/fr/tag/releases/","/de/article/","/en/article/","/es/article/","/fr/article/","/de/star/","/en/star/","/es/star/","/fr/star/","/de/timeline/","/en/timeline/","/es/timeline/","/fr/timeline/"],Qe="SEARCH_PRO_QUERY_HISTORY",f=Y(Qe,[]),be=()=>{const{queryHistoryCount:a}=q,r=a>0;return{enabled:r,queryHistory:f,addQueryHistory:l=>{r&&(f.value=Array.from(new Set([l,...f.value.slice(0,a-1)])))},removeQueryHistory:l=>{f.value=[...f.value.slice(0,l),...f.value.slice(l+1)]}}},P=a=>ke[a.id]+("anchor"in a?`#${a.anchor}`:""),qe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:U}=q,g=Y(qe,[]),xe=()=>{const a=U>0;return{enabled:a,resultHistory:g,addResultHistory:r=>{if(a){const l={link:P(r),display:r.display};"header"in r&&(l.header=r.header),g.value=[l,...g.value.slice(0,U-1)]}},removeResultHistory:r=>{g.value=[...g.value.slice(0,r),...g.value.slice(r+1)]}}},Se=a=>{const r=ve(),l=B(),x=pe(),i=F(0),R=b(()=>i.value>0),y=ye([]);return he(()=>{const{search:h,terminate:S}=me(),w=fe(c=>{const H=c.join(" "),{searchFilter:C=p=>p,splitWord:L,suggestionsFilter:O,...m}=r.value;H?(i.value+=1,h(c.join(" "),l.value,m).then(p=>C(p,H,l.value,x.value)).then(p=>{i.value-=1,y.value=p}).catch(p=>{console.warn(p),i.value-=1,i.value||(y.value=[])})):y.value=[]},q.searchDelay-q.suggestDelay);M([a,l],([c])=>w(c),{immediate:!0}),ge(()=>{S()})}),{isSearching:R,results:y}};var Le=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const l=te(),x=B(),i=ae(re),{enabled:R,addQueryHistory:y,queryHistory:h,removeQueryHistory:S}=be(),{enabled:w,resultHistory:c,addResultHistory:H,removeResultHistory:C}=xe(),L=R||w,O=le(a,"queries"),{results:m,isSearching:p}=Se(O),n=ne({isQuery:!0,index:0}),d=F(0),v=F(0),T=b(()=>L&&(h.value.length>0||c.value.length>0)),D=b(()=>m.value.length>0),A=b(()=>m.value[d.value]||null),z=()=>{const{isQuery:e,index:s}=n;s===0?(n.isQuery=!e,n.index=e?c.value.length-1:h.value.length-1):n.index=s-1},G=()=>{const{isQuery:e,index:s}=n;s===(e?h.value.length-1:c.value.length-1)?(n.isQuery=!e,n.index=0):n.index=s+1},J=()=>{d.value=d.value>0?d.value-1:m.value.length-1,v.value=A.value.contents.length-1},K=()=>{d.value=d.value<m.value.length-1?d.value+1:0,v.value=0},V=()=>{v.value<A.value.contents.length-1?v.value+=1:K()},N=()=>{v.value>0?v.value-=1:J()},E=e=>e.map(s=>Re(s)?s:t(s[0],s[1])),W=e=>{if(e.type==="customField"){const s=we[e.index]||"$content",[u,Q=""]=He(s)?s[x.value].split("$content"):s.split("$content");return e.display.map(o=>t("div",E([u,...o,Q])))}return e.display.map(s=>t("div",E(s)))},k=()=>{d.value=0,v.value=0,r("updateQuery",""),r("close")},X=()=>R?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.queryHistory),h.value.map((e,s)=>t("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===s}],onClick:()=>{r("updateQuery",e)}},[t(j,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),S(s)}})]))])):null,Z=()=>w?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.resultHistory),c.value.map((e,s)=>t($,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===s}],onClick:()=>{k()}},()=>[t(j,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(u=>E(u)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:u=>{u.preventDefault(),u.stopPropagation(),C(s)}})]))])):null;return ie("keydown",e=>{if(a.isFocusing){if(D.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const s=A.value.contents[v.value];y(a.queries.join(" ")),H(s),l.push(P(s)),k()}}else if(w){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:s}=n;n.isQuery?(r("updateQuery",h.value[s]),e.preventDefault()):(l.push(c.value[s].link),k())}}}}),M([d,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!D.value:!T.value}],id:"search-pro-results"},a.queries.length?p.value?t(ue,{hint:i.value.searching}):D.value?t("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:s},u)=>{const Q=d.value===u;return t("li",{class:["search-pro-result-list-item",{active:Q}]},[t("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),s.map((o,ee)=>{const _=Q&&v.value===ee;return t($,{to:P(o),class:["search-pro-result-item",{active:_,"aria-selected":_}],onClick:()=>{y(a.queries.join(" ")),H(o),k()}},()=>[o.type==="text"?null:t(o.type==="title"?oe:o.type==="heading"?ce:de,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?t("div",{class:"content-header"},o.header):null,t("div",W(o))])])})])})):i.value.emptyResult:L?T.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{Le as default};
